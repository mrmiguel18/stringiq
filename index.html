<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>StringIQ</title>

  <link rel="manifest" href="./manifest.json" />
  <meta name="theme-color" content="#111111" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />

  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <header class="topbar">
    <h1>StringIQ</h1>
    <p class="sub">Player profiles + racket & string setups</p>
  </header>

  <main class="wrap">
    <section class="card">
      <h2>Create / Edit Player</h2>

      <form id="playerForm" class="form">
        <input type="hidden" id="playerId" />

        <div class="row">
          <label style="flex: 2;">
            <span>Name</span>
            <input id="name" required placeholder="Player Name" />
          </label>
          <label style="flex: 1;">
            <span>Age</span>
            <input id="age" type="number" placeholder="--" />
          </label>
        </div>

        <div class="row">
          <label style="flex: 1;">
            <span>UTR</span>
            <input id="utr" type="number" step="0.1" placeholder="0.0" />
          </label>
          <label style="flex: 1;">
            <span>Hand</span>
            <select id="hand">
              <option>Right</option>
              <option>Left</option>
            </select>
          </label>
        </div>

        <hr style="border: 0; border-top: 1px solid var(--line); margin: 20px 0;" />
        <h3 style="font-size: 14px; text-transform: uppercase; color: var(--muted); margin-bottom: 10px;">Racket Setup</h3>

        <div class="row">
          <label style="flex: 1;">
            <span>Racket Model</span>
            <select id="racketModel"></select>
          </label>
          <label style="flex: 1;">
            <span>Pattern</span>
            <select id="pattern">
              <option value="16x19">16x19</option>
              <option value="18x20">18x20</option>
              <option value="16x18">16x18</option>
              <option value="Custom...">Custom...</option>
            </select>
          </label>
        </div>

        <div id="racketCustomWrap" style="display:none;">
          <label><span>Custom Racket</span><input id="racketCustom" /></label>
        </div>
        <div id="patternCustomWrap" style="display:none;">
          <label><span>Custom Pattern</span><input id="patternCustom" /></label>
        </div>

        <div class="row">
          <label style="flex: 1;">
            <span>Main String</span>
            <select id="stringMain"></select>
          </label>
          <label style="flex: 1;">
            <span>Cross String</span>
            <select id="stringCross"></select>
          </label>
        </div>

        <div id="mainCustomWrap" style="display:none;">
          <label><span>Custom Main</span><input id="mainCustom" /></label>
        </div>
        <div id="crossCustomWrap" style="display:none;">
          <label><span>Custom Cross</span><input id="crossCustom" /></label>
        </div>

        <div class="row">
          <label style="flex: 1;">
            <span>Main lbs</span>
            <select id="tensionMain"></select>
          </label>
          <label style="flex: 1;">
            <span>Cross lbs</span>
            <select id="tensionCross"></select>
          </label>
        </div>
        
        <label>
          <span>Stringer</span>
          <input id="stringer" placeholder="Who strung it?" />
        </label>

        <hr style="border: 0; border-top: 1px solid var(--line); margin: 20px 0;" />
        <h3 style="font-size: 14px; text-transform: uppercase; color: var(--muted); margin-bottom: 10px;">Performance & Feel</h3>

        <div class="row">
          <label style="flex: 1;">
            <span>Setup Rating (0-100)</span>
            <input id="setupRating" type="number" min="0" max="100" />
          </label>
          <label style="flex: 1;">
            <span>Weekly Feeling (0-100)</span>
            <input id="weeklyFeeling" type="number" min="0" max="100" />
          </label>
        </div>

        <div class="row">
          <label style="flex: 1;">
            <span>Main Feel: <strong id="mainStringRatingVal">50</strong></span>
            <input id="mainStringRating" type="range" min="0" max="100" value="50" />
          </label>
          <label style="flex: 1;">
            <span>Cross Feel: <strong id="crossStringRatingVal">50</strong></span>
            <input id="crossStringRating" type="range" min="0" max="100" value="50" />
          </label>
        </div>

        <label>
          <span>Notes</span>
          <textarea id="notes" rows="3"></textarea>
        </label>

        <div class="row" style="margin-top: 20px;">
          <button type="submit" class="btn primary" style="flex: 2;">Save Profile</button>
          <button type="button" id="cancelEdit" class="btn" style="flex: 1;">Cancel</button>
        </div>
      </form>
    </section>

    <section class="card">
      <div class="row space">
        <h2>Players</h2>
        <div class="row" style="margin-top: 0;">
          <input id="search" placeholder="Search..." style="width: 120px; margin-top:0;" />
          <select id="sortBy" style="width: 100px; margin-top:0; padding: 10px;">
            <option value="name">A-Z</option>
            <option value="newest">Recent</option>
          </select>
        </div>
      </div>
      <div id="playerList" class="list"></div>
      <p id="empty" class="empty">No players yet</p>
    </section>
  </main>

  <script src="./app.js"></script>

  <script>
    if ("serviceWorker" in navigator) {
      // Corrected path to match your service-worker.js file name
      navigator.serviceWorker.register("./sw.js")
        .then(() => console.log("Service Worker Registered"))
        .catch(err => console.log("SW Registration Failed", err));
    }
  </script>
</body>
</html>